<div *ngIf="loading()">ğŸ”„ Caricamento documenti...</div>
<div *ngIf="error()">{{ error() }}</div>

<div *ngIf="!loading() && !error()">
  <h2>ğŸ“ Documenti nella collezione: {{ collectionId }}</h2>

<div *ngFor="let doc of documents(); let i = index">
  <div *ngIf="editingDocId() !== doc.id">
    <h3>ğŸ—‚ï¸ Documento {{ i + 1 }} - ID: {{ doc.id }}</h3>
    <button (click)="editDocumentName(doc.id)">âœï¸ Modifica nome documento</button>
     <button (click)="deleteDocument(doc.id)">ğŸ—‘ï¸ Cancella</button>
  </div>

  <div *ngIf="editingDocId() === doc.id">
    <input [ngModel]="newDocName()" (ngModelChange)="newDocName.set($event)" />
    <button (click)="saveDocumentName(doc.id)">ğŸ’¾ Salva</button>
  </div>

  <!-- Tabella dei dati -->
  <table border="1">
    <thead>
      <tr>
        <th>Campo</th>
        <th>Valore</th>
        <th>Azioni</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let campo of doc.dati">
        <td>{{ campo.chiave }}</td>
        <td>{{ campo.valore }}</td>
        <td><button (click)="editRecord(doc.id)">ğŸ› ï¸ Modifica record</button></td>
      </tr>
    </tbody>
  </table>
  <hr>
</div>

<button (click)="addDocument()">â• Aggiungi documento</button>
<button (click)="loadPicture()">ğŸ–¼ï¸ Carica immagine</button>

 <app-add-document-modal
  *ngIf="showModalNewDoc()"
  [collectionId]="collectionId"
  (chiudi)="showModalNewDoc.set(false)"
></app-add-document-modal> 
 <app-upload-image-modal
  *ngIf="showModalLoadPict()"
  [collectionId]="collectionId"
  (chiudi)="showModalNewDoc.set(false)"
></app-upload-image-modal>  
</div>
